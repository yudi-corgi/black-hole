import{_ as p}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as c,c as i,a as n,b as s,d as e,e as t}from"./app-bab26e32.js";const l="/black-hole/assets/SCSç¨‹åº-d21166e3.jpg",u="/black-hole/assets/Binderæ¶ˆæ¯é€šè®¯-2366ea3d.png",d={},r={href:"https://spring.io/projects/spring-cloud-stream#learn",target:"_blank",rel:"noopener noreferrer"},k=t('<h2 id="åŸºç¡€æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€æ¦‚å¿µ" aria-hidden="true">#</a> åŸºç¡€æ¦‚å¿µ</h2><figure><img src="'+l+'" alt="Stream ç¨‹åºç»“æ„" tabindex="0" loading="lazy"><figcaption>Stream ç¨‹åºç»“æ„</figcaption></figure><p>Stream ç¨‹åºç”±ä¸€ä¸ªä¸ä¸­é—´ä»¶ä¸­ç«‹çš„æ ¸å¿ƒç»„æˆï¼Œç¨‹åºé€šè¿‡å¤–éƒ¨ Broker æš´éœ²çš„ç›®æ ‡ä¸ä»£ç ä¸­çš„ input/output å‚æ•°ä¹‹é—´å»ºç«‹<strong>ç»‘å®š</strong>ï¼ˆ<strong>Bindings</strong>ï¼‰æ¥å®ç°é€šä¿¡ï¼Œè€Œå»ºç«‹ç»‘å®šçš„ Broker ç»†èŠ‚åˆ™ç”±ç‰¹å®šäºä¸­é—´ä»¶çš„ Binder å®ç°å¤„ç†ã€‚</p><ul><li><strong>Binder</strong>ï¼šè´Ÿè´£æä¾›å¿…è¦çš„é…ç½®å’Œå®ç°ï¼Œä»¥ä¿ƒè¿›ä¸å¤–éƒ¨æ¶ˆæ¯ç³»ç»Ÿï¼ˆMQï¼‰çš„é›†æˆã€‚</li><li><strong>Bindings</strong>ï¼šæ¶ˆæ¯ç³»ç»Ÿä¸ Stream ç¨‹åºæä¾›çš„æ¶ˆæ¯ç”Ÿäº§è€…å’Œä½¿ç”¨è€…ï¼ˆç”± Binder åˆ›å»ºï¼‰ä¹‹é—´çš„æ¡¥æ¢ï¼Œå³ Producer/Consumer ä¸ MQï¼ˆé˜Ÿåˆ—ã€ä¸»é¢˜ï¼‰ä¹‹é—´çš„ç»‘å®šå…³ç³»ã€‚</li><li><strong>Message</strong>ï¼šProducer/Consumer ç”¨äºä¸ Binderï¼ˆä»¥åŠé€šè¿‡å¤–éƒ¨æ¶ˆæ¯ç³»ç»Ÿä¼ é€’æ¶ˆæ¯çš„å…¶å®ƒç¨‹åºï¼‰è¿›è¡Œé€šè®¯çš„è§„èŒƒæ•°æ®ç»“æ„ã€‚</li></ul><figure><img src="'+u+`" alt="Binder æ¶ˆæ¯é€šè®¯" tabindex="0" loading="lazy"><figcaption>Binder æ¶ˆæ¯é€šè®¯</figcaption></figure><h2 id="BindingName" tabindex="-1"><a class="header-anchor" href="#BindingName" aria-hidden="true">#</a> Bindings ç»‘å®š</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SampleApplication</span> <span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Message</span><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">demoConsumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> msg <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯æ¶ˆè´¹ï¼š&quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">.</span><span class="token function">getPayload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸€ä¸ª Stream ç¨‹åºåœ¨å¯¼å…¥<a href="#dependencies">ä¾èµ–</a>åï¼Œä½¿ç”¨ä¸Šæ–¹ä»£ç å³å¯å®ç°æ¶ˆæ¯çš„æ¶ˆæ¯ï¼Œå®ƒé»˜è®¤ä¼šåˆ›å»ºä»¥å‡½æ•°åç§°ä¸º name çš„ç»‘å®šï¼Œä¾‹å¦‚ demoConsumer-in-0 ã€‚Stream åœ¨ç»‘å®šåç§°æ–¹é¢æœ‰é»˜è®¤çš„çº¦å®šï¼Œåœ¨ Spring ä¸Šä¸‹æ–‡ä¸­ï¼Œä¼šæ£€æŸ¥ <code>Function</code>ã€<code>Supplier</code>ã€<code>Consumer</code> è¿™ç±» Bean æ³¨å†Œä¸ºæ¶ˆæ¯å¤„ç†å™¨ï¼Œè¿™äº›æ¶ˆæ¯å¤„ç†å™¨ä¼šè§¦å‘ç»‘å®šåˆ°æ‰€æä¾›çš„ Binder æ‰€å…¬å¼€çš„ç›®çš„åœ°ï¼ˆ<strong>destination</strong>ï¼Œå³ Topic-Kafkaã€Exchange-RabbitMQï¼‰ã€‚</p><p>ç»‘å®šåç§°çº¦å®šå¦‚ä¸‹ï¼š</p><ul><li>inputï¼ˆè¾“å…¥ç»‘å®šï¼Œå³æ¶ˆè´¹è€…ï¼‰ï¼š<code>&lt;functionName&gt; + in + &lt;index&gt;</code></li><li>outputï¼ˆè¾“å‡ºç»‘å®šï¼Œå³ç”Ÿäº§è€…ï¼‰ï¼š<code>&lt;functionName&gt; + out + &lt;index&gt;</code></li></ul><p><code>functionName</code> å³å®šä¹‰çš„å‡½æ•°å¼å¤„ç†å™¨ Bean åç§°ï¼Œ<code>in/out</code> åˆ†åˆ«å¯¹åº”ç»‘å®šç±»å‹ï¼ˆè¾“å…¥/è¾“å‡ºï¼‰ï¼Œ<code>index</code> æ˜¯ç»‘å®šçš„ç´¢å¼•ï¼Œå¯¹äºå•è¾“å…¥/è¾“å‡ºå‡½æ•°ï¼Œå®ƒå§‹ç»ˆä¸º 0ï¼Œå®ƒä»…ä¸<strong>å…·æœ‰å¤šä¸ªè¾“å…¥/è¾“å‡ºå‚æ•°çš„å‡½æ•°</strong>ç›¸å…³ã€‚</p><p>å‡½æ•°çš„ä½œç”¨ï¼š</p>`,12),m=n("li",null,[n("strong",null,"Consumer"),s("ï¼šè¡¨ç¤ºæ¶ˆæ¯çš„æ¶ˆè´¹ï¼Œåªé’ˆå¯¹æ¶ˆæ¯çš„è¾“å…¥")],-1),v=n("strong",null,"Supplier",-1),b={href:"https://docs.spring.io/spring-cloud-stream/reference/spring-cloud-stream/producing-and-consuming-messages.html#polling-configuration-properties",target:"_blank",rel:"noopener noreferrer"},g={href:"https://docs.spring.io/spring-cloud-stream/reference/spring-cloud-stream/producing-and-consuming-messages.html#suppliers-sources",target:"_blank",rel:"noopener noreferrer"},y=n("li",null,[n("strong",null,"Function"),s("ï¼šè¡¨ç¤ºæ¶ˆæ¯çš„æ¶ˆè´¹ä¸ç”Ÿäº§ï¼Œå³è¾“å…¥ä¸è¾“å‡ºå…¼å…· "),n("ul",null,[n("li",null,"å½“å®šä¹‰è¯¥ç±»å‹æ—¶ï¼Œåº”å½“æœ‰å¯¹åº”çš„è¾“å…¥å’Œè¾“å‡ºç»‘å®š"),n("li",null,[s("åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœå®šä¹‰ Function å‡½æ•°ï¼Œå¦‚ "),n("code",null,"public Function<String,String> toUpperCase()"),s("ï¼Œä¼šç”Ÿæˆä¸¤ä¸ªç»‘å®š "),n("code",null,"toUpperCase-in-0"),s(" å’Œ "),n("code",null,"toUpperCase-out-0")])])],-1),h=t(`<p>å¯¹äºç»‘å®šçš„ç›®çš„åœ°ï¼Œå¯åœ¨ <code>application.yml</code> ä¸­é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># å‡è®¾ä½¿ç”¨çš„æ¶ˆæ¯ç³»ç»Ÿæ˜¯ RabbitMQï¼Œæ­¤é¡¹é…ç½®ä¼šåˆ›å»ºä¸€ä¸ª &#39;my-topic&#39; çš„ Exchangeï¼Œä»¥åŠä¸€ä¸ª &#39;my-topic.my-queue&#39; çš„ Queue</span>
<span class="token key atrule">spring.cloud.stream.bindings.uppercase-in-0.destination</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>topic
<span class="token key atrule">spring.cloud.stream.bindings.uppercase-in-0.group</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>queue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="dynamic-destination" tabindex="-1"><a class="header-anchor" href="#dynamic-destination" aria-hidden="true">#</a> æ¶ˆæ¯è¾“å…¥/è¾“å‡º</h2><p><strong>StreamBridge</strong>ï¼šä¸€ä¸ªå…è®¸ç”¨æˆ·å°†æ•°æ®å‘é€åˆ°è¾“å‡ºç»‘å®šçš„ç±»ï¼Œåœ¨ Stream ç¨‹åºçš„å¸¸è§åœºæ™¯ä¸­ï¼Œæ¶ˆæ¯æ˜¯å¾ˆå°‘éœ€è¦ç”¨æˆ·æ‰‹åŠ¨å‘é€ï¼Œå³æ¶ˆæ¯åº”å½“æ˜¯åœ¨ Stream ç¨‹åºä¸Šä¸‹æ–‡ä¸­äº§ç”Ÿå¹¶è‡ªåŠ¨å‘é€ï¼Œè€Œå½“æ•°æ®æºæ˜¯åœ¨ Stream ç¨‹åºä¹‹å¤–ï¼ˆæ¯”å¦‚ REST ç«¯ç‚¹è¢«è°ƒç”¨åäº§ç”Ÿçš„æ•°æ®è¦å‘é€åˆ°ç›®æ ‡ç»‘å®šï¼‰ï¼Œåˆ™å¯ä½¿ç”¨è¯¥ç±»è¿›è¡Œæ‰‹åŠ¨å‘é€ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/send&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SendController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">StreamBridge</span> streamBridge<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ„å»ºæ¶ˆæ¯</span>
        <span class="token class-name">Message</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> msg <span class="token operator">=</span> <span class="token class-name">MessageBuilder</span><span class="token punctuation">.</span><span class="token function">withPayload</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å‘æŒ‡å®šçš„ç›®çš„åœ°å‘é€æ¶ˆæ¯</span>
        streamBridge<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;demoConsumer-out-0&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token class-name">MimeType</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é¦–å…ˆéœ€è¦è¯´æ˜ä¸€ç‚¹ï¼Œåœ¨å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¸€èˆ¬ä¸ä¼šåœ¨åŒä¸€ä¸ªæœåŠ¡é‡Œï¼ˆè‹¥æ˜¯è¿˜æœ‰å¿…è¦ç”¨ MQ å—ï¼ŸğŸ˜€ï¼‰ï¼Œå› æ­¤ï¼Œæ­£å¸¸æƒ…å†µæ˜¯ä¼šå°†è¾“å…¥ç»‘å®šæ”¾åœ¨æ¶ˆè´¹è€…æœåŠ¡ï¼Œè€Œåœ¨ç”Ÿäº§è€…æœåŠ¡é‡Œé…ç½®ä¸­æ·»åŠ ä¸€ä¸ªè¾“å‡ºç»‘å®šï¼Œå¹¶æŒ‡å®šç›¸åº”çš„ <code>destination</code>ï¼Œå¦‚ä¸‹é…ç½®ã€‚è¿™æ ·åœ¨ç”Ÿäº§è€…æœåŠ¡ä¸­ä½¿ç”¨ <code>StreamBridge</code> å‘é€æ¶ˆæ¯æ—¶å°±æŒ‡å®šè¾“å‡ºç»‘å®šåç§°å³å¯ï¼Œä¼šè‡ªåŠ¨å¯»æ‰¾åˆ°å¯¹åº”çš„ <code>destination</code> è¿›è¡Œæ¶ˆæ¯è·¯ç”±ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># ç”Ÿäº§è€…æœåŠ¡</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">stream</span><span class="token punctuation">:</span>
      <span class="token key atrule">bindings</span><span class="token punctuation">:</span>
        <span class="token key atrule">demoConsumer-out-0</span><span class="token punctuation">:</span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> consumer<span class="token punctuation">-</span>topic
<span class="token comment"># æ¶ˆè´¹è€…æœåŠ¡</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">stream</span><span class="token punctuation">:</span>
      <span class="token key atrule">bindings</span><span class="token punctuation">:</span>
        <span class="token key atrule">demoConsumer-in-0</span><span class="token punctuation">:</span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> consumer<span class="token punctuation">-</span>topic
          <span class="token key atrule">group</span><span class="token punctuation">:</span> consumer<span class="token punctuation">-</span>queue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸è¿‡è¿˜æœ‰ä¸€ç§ <strong>åŠ¨æ€ç›®çš„åœ°</strong> æ–¹å¼ï¼Œé‚£å°±æ˜¯åœ¨çœå»ç”Ÿäº§è€…çš„è¾“å‡ºç»‘å®šé…ç½®åï¼Œä½¿ç”¨ StreamBridge å‘é€æ¶ˆæ¯æ—¶ä¸æŒ‡å®šç»‘å®šåç§°ï¼Œè€Œæ˜¯ç›´æ¥æŒ‡å®š <code>destination</code>ï¼Œå¦‚ï¼š<code>streamBridge.send(&quot;consumer-topic&quot;, msg);</code>ï¼Œå®ƒçš„æœ¬è´¨æ˜¯åœ¨æ²¡æœ‰æ£€æµ‹å¯¹åº”çš„ç»‘å®šåç§°æ—¶ï¼Œä¼šæ ¹æ®æŒ‡å®šçš„ <code>destination</code> åŠ¨æ€åˆ›å»ºè¾“å…¥/è¾“å‡ºç»‘å®šï¼Œè€Œç”±äºæ¶ˆè´¹è€…æœåŠ¡å·²ç»æœ‰è¯¥ <code>destination</code> çš„è¾“å…¥ç»‘å®šï¼Œé‚£ä¹ˆå‘é€è‡³è¯¥ <code>destination</code> çš„æ¶ˆæ¯è‡ªç„¶å°±ä¼šè¢«æ¶ˆè´¹è€…æ¶ˆè´¹äº†ã€‚</p><h3 id="é€šé“æ‹¦æˆªå™¨" tabindex="-1"><a class="header-anchor" href="#é€šé“æ‹¦æˆªå™¨" aria-hidden="true">#</a> é€šé“æ‹¦æˆªå™¨</h3><ul><li><strong>MessageChannel</strong>ï¼šStreamBridge å†…éƒ¨æœ¬è´¨æ˜¯ä½¿ç”¨äº† MessageChannel è¿›è¡Œè¾“å‡ºç»‘å®šçš„å»ºç«‹å’Œæ¶ˆæ¯çš„å‘é€ï¼ŒMessageChannel æ¥å£å®šä¹‰æ¶ˆæ¯çš„å‘é€ï¼Œå®ƒçš„å­ç±»å®ç°åˆ™æ‰©å±•äº†å®ƒçš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ‹¦æˆªå™¨ç­‰</li><li><strong>@GlobalChannelInterceptor</strong>ï¼šè¯¥æ³¨è§£ä¸º StreamBridge æ³¨å…¥äº†æ‹¦æˆªå™¨ï¼Œå…¶å±æ€§ <code>patterns</code> å®šä¹‰äº†å“ªäº›ç»‘å®šé€šé“åœ¨å‘é€æ¶ˆæ¯æ—¶ä¼šè¢«æ‹¦æˆªï¼Œé»˜è®¤ <code>*</code> åŒ¹é…å…¨éƒ¨ï¼Œå¯å®ç°å‰ç½®ã€åç½®æ‹¦æˆª</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomChannelInterceptor</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@GlobalChannelInterceptor</span><span class="token punctuation">(</span>patterns <span class="token operator">=</span> <span class="token string">&quot;foo-*&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// è¡¨ç¤º foo- å¼€å¤´çš„ç»‘å®šåœ¨å‘é€æ¶ˆæ¯æ—¶ä¼šè¢«æ‹¦æˆª</span>
    <span class="token keyword">public</span> <span class="token class-name">ChannelInterceptor</span> <span class="token function">consumerChannelInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ChannelInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Message</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">preSend</span><span class="token punctuation">(</span><span class="token class-name">Message</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> message<span class="token punctuation">,</span> <span class="token class-name">MessageChannel</span> channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯å‘é€å‰è¾“å‡ºå†…å®¹ï¼š&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">.</span><span class="token function">getPayload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// å¦‚æœè¿”å› null åˆ™ä¸ä¼šçœŸæ­£å‘é€æ¶ˆæ¯</span>
                <span class="token keyword">return</span> message<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterSendCompletion</span><span class="token punctuation">(</span><span class="token class-name">Message</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> msg<span class="token punctuation">,</span> <span class="token class-name">MessageChannel</span> channel<span class="token punctuation">,</span> <span class="token keyword">boolean</span> sent<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯å‘é€åè¾“å‡ºå†…å®¹ï¼š&quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">.</span><span class="token function">getPayload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dependencies" tabindex="-1"><a class="header-anchor" href="#dependencies" aria-hidden="true">#</a> ä¸‰ç§å‡½æ•°åŸºç¡€ç¤ºä¾‹</h3><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- Maven ä¾èµ–ï¼Œç”± Spring Cloud å®˜æ–¹æä¾›ï¼ŒæŒ‰éœ€å¯¼å…¥å³å¯ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-stream-rabbit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-stream-kafka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">stream</span><span class="token punctuation">:</span>
      <span class="token key atrule">bindings</span><span class="token punctuation">:</span>
        <span class="token key atrule">demoConsumer-in-0</span><span class="token punctuation">:</span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> consumer<span class="token punctuation">-</span>topic
          <span class="token key atrule">group</span><span class="token punctuation">:</span> consumer<span class="token punctuation">-</span>queue <span class="token comment"># æ­¤é¡¹åœ¨ RabbitMQ è¡¨ç¤ºé˜Ÿåˆ—ï¼ŒKafka è¡¨ç¤ºæ¶ˆè´¹è€…ç»„</span>
        <span class="token comment"># è¡¨ç¤º supplier ç”Ÿäº§æ¶ˆæ¯ä¼šå‘å¾€ç›®çš„ consumer-topicï¼Œä¹Ÿå°±æ˜¯äº¤ç”±ä¸Šé¢çš„æ¶ˆè´¹è€…å¤„ç†</span>
        <span class="token key atrule">demoSupplier-out-0</span><span class="token punctuation">:</span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> consumer<span class="token punctuation">-</span>topic
        <span class="token comment"># function ç±»å‹éœ€è¦é…ç½®è¾“å…¥ã€è¾“å‡ºç»‘å®šï¼Œè¡¨ç¤ºå‘ function-topic å‘é€æ¶ˆæ¯åç»è¿‡å‡½æ•°å¤„ç†ä¼šå†å‘é€ç»™ consumer-topic</span>
        <span class="token key atrule">demoFunction-in-0</span><span class="token punctuation">:</span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> function<span class="token punctuation">-</span>topic
          <span class="token key atrule">group</span><span class="token punctuation">:</span> function<span class="token punctuation">-</span>queue <span class="token comment"># æŒ‡å®šäº¤æ¢æœºç»‘å®šçš„é˜Ÿåˆ—</span>
        <span class="token key atrule">demoFunction-out-0</span><span class="token punctuation">:</span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> consumer<span class="token punctuation">-</span>topic
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MQHandler</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// æ¶ˆè´¹æ¶ˆæ¯</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Message</span><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">demoConsumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> msg <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯æ¶ˆè´¹ï¼š&quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">.</span><span class="token function">getPayload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// ç”Ÿäº§æ¶ˆæ¯</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Message</span><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">demoSupplier</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">MessageBuilder</span><span class="token punctuation">.</span><span class="token function">withPayload</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, Spring Cloud Stream!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// æ¶ˆè´¹å¹¶ç”Ÿäº§æ¶ˆæ¯ï¼Œæ­¤å¤„ä½œç”¨å¼å°†è¾“å…¥çš„å­—ç¬¦ä¸²æ¶ˆæ¯è½¬ä¸ºå¤§å†™å†è¾“å‡º</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Message</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span> <span class="token class-name">Message</span><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">demoFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toUpperCase</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/demo&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoController</span> <span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">StreamBridge</span> streamBridge<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ„å»ºæ¶ˆæ¯</span>
        <span class="token class-name">Message</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> msg <span class="token operator">=</span> <span class="token class-name">MessageBuilder</span><span class="token punctuation">.</span><span class="token function">withPayload</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å‘æŒ‡å®šçš„è¾“å…¥ç»‘å®šå‘é€æ¶ˆæ¯</span>
        streamBridge<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;demoConsumer-in-0&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token class-name">MimeType</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        streamBridge<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;demoFunction-in-0&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token class-name">MimeType</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŒ‰ç…§ä¸Šæ–¹é…ç½®å’Œä»£ç ï¼Œå½“å¯åŠ¨æœåŠ¡åï¼ˆä¸ºæ–¹ä¾¿æ¼”ç¤ºï¼Œä¸Šæ–¹ä»£ç çš†åœ¨åŒä¸€æœåŠ¡ï¼‰ï¼Œæ— è®ºä½¿ç”¨çš„æ˜¯ RabbitMQ è¿˜æ˜¯ Kakfaï¼ŒStream éƒ½ä¼šæ˜ å°„ <code>destination</code>ã€<code>group</code> åˆ°å¯¹åº” MQ ç³»ç»Ÿä¸­çš„æ¦‚å¿µï¼Œæ¯”å¦‚åœ¨ RabbitMQ å°±åˆ†åˆ«ä»£è¡¨ç€ <code>Exchange</code>ã€<code>Queue</code>ï¼Œåœ¨ Kafka ä¸­åˆ™æ˜¯ <code>Topic</code>ã€<code>ConsumerGroup</code>ã€‚</p><p>è‡³äºä¸ºä»€ä¹ˆæ²¡æœ‰é…ç½® MQ æœåŠ¡ç¯å¢ƒåœ°å€ï¼Œæ˜¯å› ä¸º Stream ä¾èµ–åŒ…å«äº† RabbitMQã€Kafka åœ¨ Spring Boot ä¸­çš„é›†æˆï¼Œæ‰€ä»¥ç¼ºçœç¯å¢ƒé…ç½®æ—¶ï¼Œä¼šä½¿ç”¨ Spring Boot è‡ªå¸¦çš„é»˜è®¤å€¼å»è¿æ¥ Brokerã€‚å½“ç„¶æƒ³æŒ‡å®šç¯å¢ƒçš„è¯ï¼Œå°±å¦‚åŒ Spring Boot é›†æˆ MQ æ—¶æ‰€åšçš„é…ç½®ä¸€æ ·ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">kafka</span><span class="token punctuation">:</span>
   <span class="token key atrule">bootstrap-servers</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">9092</span>
  <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
    <span class="token comment"># ç¡®è®¤æœºåˆ¶éœ€è¦ä¾é  Spring AMQP å®ç°ï¼ŒStream å¹¶ä¸æä¾›ï¼ŒBinder æœ¬èº«ä½¿ç”¨çš„ä¹Ÿæ˜¯ Spring Boot çš„ Connection Factoryï¼Œ</span>
    <span class="token comment"># Stream æ”¯æŒ Spring AMQP çš„æ‰€æœ‰é…ç½®</span>
    <span class="token key atrule">publisher-returns</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">publisher-confirm-type</span><span class="token punctuation">:</span> simple
    <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
    <span class="token key atrule">username</span><span class="token punctuation">:</span> admin
    <span class="token key atrule">password</span><span class="token punctuation">:</span> admin123
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5672</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å…¶å®ƒé‡è¦é…ç½®" tabindex="-1"><a class="header-anchor" href="#å…¶å®ƒé‡è¦é…ç½®" aria-hidden="true">#</a> å…¶å®ƒé‡è¦é…ç½®</h2><p><strong>PS</strong>ï¼šä»¥ä¸‹æ‰€æœ‰é…ç½®ä»¥ RabbitMQ ä¸ºä¾‹ï¼ŒKafka ä¹Ÿæ˜¯ç±»ä¼¼ï¼Œä¸æ¸…æ¥šçš„é…ç½®åªéœ€è¦çœ‹å®˜æ–‡å³å¯ï¼Œå¾ˆè¯¦ç»†ã€‚</p><h3 id="æŒ‡å®šæ³¨å†Œçš„æ¶ˆæ¯å¤„ç†å™¨" tabindex="-1"><a class="header-anchor" href="#æŒ‡å®šæ³¨å†Œçš„æ¶ˆæ¯å¤„ç†å™¨" aria-hidden="true">#</a> æŒ‡å®šæ³¨å†Œçš„æ¶ˆæ¯å¤„ç†å™¨</h3><p>ä¸Šé¢æåˆ° Stream å¯åŠ¨ä¼šæ£€æµ‹ <code>Function</code>ã€<code>Supplier</code>ã€<code>Consumer</code> ä¸‰ç§ç±»å‹å‡½æ•° Bean ä½œä¸ºæ¶ˆæ¯å¤„ç†å™¨ï¼Œä½†åœ¨å®é™…ä¸­ä¹Ÿå¹¶éæ‰€æœ‰çš„å‡½æ•°å¼ Bean éƒ½æ˜¯ç”¨äº Stream çš„æ¶ˆæ¯å¤„ç†ï¼Œå› æ­¤å¯ä»¥ç”¨ä»¥ä¸‹é…ç½®æŒ‡å®šéœ€è¦æ³¨å†Œçš„å‡½æ•° Bean çš„åç§°ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">function</span><span class="token punctuation">:</span>
      <span class="token key atrule">definition</span><span class="token punctuation">:</span> demoConsumer;demoSupplier;demoFunction
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨åˆ†å·è¿›è¡Œåˆ†å‰²ï¼Œæ³¨æ„ä¸è¦å‡ºç°ç©ºæ ¼æˆ–å…¶å®ƒç¬¦å·ï¼Œå› ä¸ºè¯¥å­—ç¬¦ä¸²å±æ€§åˆ†å‰²çš„æºç æ˜¯è°ƒç”¨çš„ <code>String.split(&quot;;&quot;)</code>ï¼Œä¼šå°†å…¶å®ƒç¬¦å·ä¹Ÿå½“ä½œ Bean åç§°çš„ä¸€éƒ¨åˆ†ã€‚<strong>æ³¨æ„</strong>ï¼šå½“å­˜åœ¨å¤šä¸ªç›¸åŒç±»å‹çš„å‡½æ•° Bean æ—¶ï¼Œæ¯”å¦‚æœ‰ä¸¤ä¸ª <code>Consumer</code> Beanï¼Œä¹Ÿå¿…é¡»æŒ‡å®šè¯¥é…ç½®ï¼Œå› ä¸º Stream é»˜è®¤æ˜¯ä¾èµ–åº”ç”¨ä¸Šä¸‹æ–‡æ¥ç¡®å®šå“ªä¸ªæ˜¯æ¶ˆè´¹è€…ï¼Œå¹¶ä¸ä¼šä¾èµ–ç»‘å®šåç§°ç¡®å®šã€‚</p><p>é™¤æ­¤ä¹‹å¤–è¿˜å¯ç”¨ç®¡é“ç¬¦ï¼ˆ<code>|</code>ï¼‰è¿æ¥å¤šä¸ªå‡½æ•°ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">function</span><span class="token punctuation">:</span>
      <span class="token key atrule">definition</span><span class="token punctuation">:</span> demoFunctionOne<span class="token punctuation">|</span>demoFunctionTwo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>demoFunctionOne|demoFunctionTwo</code> çš„æ„æ€æ˜¯è¿æ¥ä¸¤ä¸ª <code>Function</code> å‡½æ•°ï¼ˆå‡è®¾å·²å£°æ˜ï¼‰ç»„åˆæˆä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå¹¶ä¸” <code>demoFunctionOne</code> ç”Ÿäº§çš„æ¶ˆæ¯å°†ç›´æ¥ä½œä¸º <code>demoFunctionTwo</code> çš„è¾“å…¥ï¼Œè€Œåœ¨æŒ‡å®šè¯¥ç»„åˆå‡½æ•°çš„è¾“å…¥/è¾“å‡ºç»‘å®šæ—¶ï¼Œä¹Ÿåº”è¯¥ä½¿ç”¨è¿™ä¸ªç»„åˆåç§°ï¼Œå¦‚ <code>demoFunctionOne|demoFunctionTwo-in-0</code>ã€<code>demoFunctionOne|demoFunctionTwo-out-0</code>ã€‚æ˜¾ç„¶è¿™å¾ˆå†—é•¿ï¼ŒStream ä¹Ÿè€ƒè™‘åˆ°è¿™ç‚¹ï¼Œå¹¶æä¾›äº†ä¸ºç»‘å®šå£°æ˜åˆ«åçš„æ–¹å¼ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">function</span><span class="token punctuation">:</span>
      <span class="token key atrule">definition</span><span class="token punctuation">:</span> demoFunctionOne<span class="token punctuation">|</span>demoFunctionTwo
    <span class="token key atrule">stream</span><span class="token punctuation">:</span>
      <span class="token key atrule">function</span><span class="token punctuation">:</span>
        <span class="token key atrule">bindings</span><span class="token punctuation">:</span> 
          <span class="token comment"># å±æ€§æŒ‡å®šè¾“å…¥/è¾“å‡ºç»‘å®šåç§°ï¼Œå€¼åˆ™ä¸ºåˆ«å</span>
          <span class="token key atrule">demoFunctionOne|demoFunctionTwo-in-0</span><span class="token punctuation">:</span> FunctionCompositionIn
          <span class="token key atrule">demoFunctionOne|demoFunctionTwo-out-0</span><span class="token punctuation">:</span> FunctionCompositionOut
      <span class="token key atrule">bindings</span><span class="token punctuation">:</span>
        <span class="token comment"># ç›´æ¥ä½¿ç”¨åˆ«å</span>
        <span class="token key atrule">FunctionCompositionIn</span><span class="token punctuation">:</span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> sf<span class="token punctuation">-</span>exchange
          <span class="token key atrule">group</span><span class="token punctuation">:</span> sf<span class="token punctuation">-</span>queue
        <span class="token key atrule">FunctionCompositionOut</span><span class="token punctuation">:</span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> consumer<span class="token punctuation">-</span>exchange 
        
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="supplier-è½®è¯¢é…ç½®" tabindex="-1"><a class="header-anchor" href="#supplier-è½®è¯¢é…ç½®" aria-hidden="true">#</a> Supplier è½®è¯¢é…ç½®</h3><p>Supplier é»˜è®¤æ˜¯ 1s æ‰§è¡Œä¸€æ¬¡ç”Ÿäº§æ¶ˆæ¯ï¼Œæ—¢ç„¶æ˜¯é»˜è®¤ï¼Œé‚£ä¹ˆå°±è‚¯å®šæœ‰åŠ¨æ€é…ç½®æ–¹å¼ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token comment"># Supplier å…¨å±€æ¶ˆæ¯å‘é€è½®è¯¢é…ç½®</span>
  <span class="token key atrule">integration</span><span class="token punctuation">:</span>
    <span class="token key atrule">poller</span><span class="token punctuation">:</span>
      <span class="token key atrule">cron</span><span class="token punctuation">:</span> 1 * * * * <span class="token punctuation">?</span>          <span class="token comment"># CRON è¡¨è¾¾å¼</span>
      <span class="token key atrule">fixed-delay</span><span class="token punctuation">:</span> 5s            <span class="token comment"># å›ºå®šå»¶è¿Ÿï¼Œä¸ fixed-rateã€cron äº’æ–¥</span>
      <span class="token key atrule">fixed-rate</span><span class="token punctuation">:</span> 2s             <span class="token comment"># å›ºå®šé¢‘ç‡ï¼Œä¸ fixed-delayã€cron äº’æ–¥</span>
      <span class="token key atrule">initial-delay</span><span class="token punctuation">:</span> <span class="token number">5</span>           <span class="token comment"># åˆå§‹å»¶è¿Ÿï¼Œåº”ç”¨äº fixed-delayã€fixed-rateï¼Œå¯¹ cron æ— æ•ˆ</span>
      <span class="token key atrule">max-messages-per-poll</span><span class="token punctuation">:</span> <span class="token number">2</span>   <span class="token comment"># æ¯æ¬¡è½®è¯¢çš„æœ€å¤§æ¶ˆæ¯æ¡æ•°</span>
      <span class="token key atrule">receive-timeout</span><span class="token punctuation">:</span> 5s        <span class="token comment"># æ¥æ”¶è¶…æ—¶æ—¶é—´</span>
  <span class="token key atrule">could</span><span class="token punctuation">:</span>
    <span class="token key atrule">function</span><span class="token punctuation">:</span>
      <span class="token key atrule">definition</span><span class="token punctuation">:</span> demoSupplier
	<span class="token key atrule">stream</span><span class="token punctuation">:</span>
	  <span class="token key atrule">bindings</span><span class="token punctuation">:</span>
	    <span class="token key atrule">demoSupplier-out-0</span><span class="token punctuation">:</span>
	      <span class="token key atrule">destination</span><span class="token punctuation">:</span> consumer<span class="token punctuation">-</span>exchange
	      <span class="token comment"># æŒ‡å®šå½“å‰ç»‘å®šçš„ç”Ÿäº§è€…é…ç½®</span>
	      <span class="token key atrule">producer</span><span class="token punctuation">:</span>
	        <span class="token comment"># é¢„å…ˆåˆ›å»ºçš„é˜Ÿåˆ—ï¼ŒStream å…³äºé˜Ÿåˆ—é»˜è®¤æ˜¯æ¶ˆè´¹è€…æœåŠ¡å¯åŠ¨æ—¶æ‰åˆ›å»ºï¼Œå³åªæœ‰ç”Ÿäº§è€…å­˜åœ¨æ—¶å¹¶ä¸ä¼šåˆ›å»ºé˜Ÿåˆ—å¹¶ç»‘å®šäº¤æ¢æœº</span>
            <span class="token comment"># è‹¥ä¸é…ç½®æ­¤é¡¹ï¼Œé‚£ä¹ˆå½“æ¶ˆè´¹è€…æœåŠ¡æœªå¯åŠ¨æ—¶ï¼Œå‘é€åˆ°æ­¤ç»‘å®šçš„æ‰€æœ‰æ¶ˆæ¯å°†ä¸¢å¤±ï¼ˆä¹Ÿå°±æ˜¯åªæœ‰äº¤æ¢æœºï¼Œè€Œæ²¡æœ‰ç»‘å®šé˜Ÿåˆ—ï¼‰</span>
            <span class="token key atrule">required-groups</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> prepare<span class="token punctuation">-</span>queue
            <span class="token comment"># åªé’ˆå¯¹å½“å‰ Supplier è¾“å‡ºç»‘å®šçš„è½®è¯¢é…ç½®</span>
	        <span class="token key atrule">poller</span><span class="token punctuation">:</span>
              <span class="token key atrule">fixed-delay</span><span class="token punctuation">:</span> 1m             <span class="token comment"># å‘é€é—´éš”ï¼Œé»˜è®¤ 1s</span>
              <span class="token key atrule">initial-delay</span><span class="token punctuation">:</span> 1s           <span class="token comment"># åˆå§‹å‘é€å»¶è¿Ÿæ—¶é—´ï¼Œé»˜è®¤ 0sï¼Œå…¶ä¸‹ units å±æ€§å¯æ§åˆ¶æ—¶é—´å•ä½</span>
              <span class="token key atrule">max-messages-per-poll</span><span class="token punctuation">:</span> <span class="token number">1</span>    <span class="token comment"># æ¯æ¬¡è½®è¯¢å‘é€çš„æ¶ˆæ¯æ¡æ•°ï¼Œé»˜è®¤ 1 æ¡</span>
              <span class="token key atrule">cron</span><span class="token punctuation">:</span> 0/1 * * * * <span class="token punctuation">?</span>         <span class="token comment"># CRON è¡¨è¾¾å¼æŒ‡å®šå‘é€å‘¨æœŸï¼Œæ¯” fixed-delay ä¼˜å…ˆçº§æ›´é«˜</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="äº¤æ¢æœºç±»å‹ã€è·¯ç”±é”®é…ç½®" tabindex="-1"><a class="header-anchor" href="#äº¤æ¢æœºç±»å‹ã€è·¯ç”±é”®é…ç½®" aria-hidden="true">#</a> äº¤æ¢æœºç±»å‹ã€è·¯ç”±é”®é…ç½®</h3><p>Stream æ ¹æ®ç»‘å®šä¿¡æ¯æ‰€åˆ›å»ºçš„äº¤æ¢æœºé»˜è®¤éƒ½ä¸º <code>Topic</code>ï¼Œä¸”è·¯ç”±é”®åŒ¹é…è§„åˆ™ä¸º <code>#</code>ï¼Œä¹Ÿå°±æ˜¯åŒ¹é…å…¨éƒ¨ï¼Œè‹¥æƒ³æŒ‡å®šè‡ªå·±çš„è·¯ç”±é”®ï¼ˆä¸€ä¸ªäº¤æ¢æœºç»‘å®šå¤šä¸ªé˜Ÿåˆ—æ—¶ï¼‰ï¼Œåˆ™æŒ‰å¦‚ä¸‹æ–¹å¼ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># ç”Ÿäº§è€…é…ç½®</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">could</span><span class="token punctuation">:</span>
    <span class="token key atrule">stream</span><span class="token punctuation">:</span>
	  <span class="token key atrule">bindings</span><span class="token punctuation">:</span>
        <span class="token key atrule">demoConsumer-out-0</span><span class="token punctuation">:</span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> consumer<span class="token punctuation">-</span>exchange
      <span class="token key atrule">rabbit</span><span class="token punctuation">:</span>
        <span class="token key atrule">bindings</span><span class="token punctuation">:</span>
          <span class="token key atrule">demoConsumer-out-0</span><span class="token punctuation">:</span>
            <span class="token key atrule">producer</span><span class="token punctuation">:</span>
              <span class="token comment"># æŒ‡å®šå›ºå®šçš„è·¯ç”±é”®ï¼Œrouting-key åœ¨ 3.2.x ç‰ˆæœ¬ä¸å¯ç”¨ï¼Œåªæ˜¯æå‰æš´éœ²äº†å±æ€§é…ç½®è€Œå·²</span>
              <span class="token comment"># 4.x æ‰å¯ç”¨ï¼Œè¿˜æ˜¯ä¼˜å…ˆæ¨èç”¨ routing-key-expressionï¼Œä¸¤è€…äº’æ–¥</span>
              <span class="token key atrule">routing-key</span><span class="token punctuation">:</span> string<span class="token punctuation">-</span>consumer<span class="token punctuation">-</span>key
              <span class="token comment"># æŒ‡å®šè·¯ç”±é”®è¡¨è¾¾å¼ SpELï¼Œè¿™é‡Œçš„æ„æ€æ˜¯ Message çš„ Headers å±æ€§ type è¡¨ç¤ºè·¯ç”±é”®</span>
              <span class="token comment"># é€šè¿‡æ­¤æ¥å®ç°åŠ¨æ€è·¯ç”±ï¼Œå¸¸ç”¨äºä¸€ä¸ªäº¤æ¢æœºæœ‰å¤šä¸ªé˜Ÿåˆ—ä¸”è·¯ç”±é”®ä¸åŒæ—¶</span>
              <span class="token comment"># é»˜è®¤ä¸º {destination}ï¼Œä¹Ÿå°±æ˜¯å–äº¤æ¢æœºçš„åç§°ä½œä¸ºè·¯ç”±é”®</span>
              <span class="token key atrule">routing-key-expression</span><span class="token punctuation">:</span> headers.type

<span class="token comment"># æ¶ˆè´¹è€…é…ç½®</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">could</span><span class="token punctuation">:</span>
    <span class="token key atrule">function</span><span class="token punctuation">:</span>
      <span class="token key atrule">definition</span><span class="token punctuation">:</span> demoConsumer
	<span class="token key atrule">stream</span><span class="token punctuation">:</span>
	  <span class="token key atrule">bindings</span><span class="token punctuation">:</span>
	    <span class="token comment"># æ”¾åœ¨æ¶ˆè´¹è€…æœåŠ¡é‡Œçš„é…ç½®</span>
	    <span class="token key atrule">demoConsumer-in-0</span><span class="token punctuation">:</span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> consumer<span class="token punctuation">-</span>exchange
          <span class="token key atrule">group</span><span class="token punctuation">:</span> consumer<span class="token punctuation">-</span>queue             <span class="token comment"># æŒ‡å®šäº¤æ¢æœºç»‘å®šé˜Ÿåˆ—çš„åç§°</span>
          <span class="token comment"># producer: ç”Ÿäº§è€…é…ç½® </span>
          <span class="token comment"># consumer: æ¶ˆè´¹è€…é…ç½®</span>
      <span class="token comment"># åœ¨è¿™é‡Œé…ç½®çš„æ˜¯ RabbitMQ Binder é’ˆå¯¹ RabbitMQ ç”Ÿäº§è€…/æ¶ˆè´¹è€…çš„å±æ€§</span>
      <span class="token comment"># è·Ÿåœ¨ç»‘å®šä¸­çš„ producer/consumer çš„é…ç½®æ˜¯æœ‰äº›é‡å çš„ï¼Œå¯ç†è§£ä¸ºåè€…æ˜¯ Stream æä¾›çš„å¯¹æ‰€æœ‰ Binder çš„ç”Ÿäº§ä¸æ¶ˆè´¹çš„é€‚é…é…ç½®</span>
      <span class="token key atrule">rabbit</span><span class="token punctuation">:</span>
        <span class="token key atrule">bindings</span><span class="token punctuation">:</span>
          <span class="token comment"># æ”¾åœ¨æ¶ˆè´¹è€…æœåŠ¡é‡Œçš„é…ç½®</span>
          <span class="token key atrule">demoConsumer-in-0</span><span class="token punctuation">:</span> <span class="token comment"># æ³¨æ„åç§°è¦è·Ÿ bindings ä¸­çš„ä¸€è‡´</span>
            <span class="token key atrule">consumer</span><span class="token punctuation">:</span>
              <span class="token comment"># è®¾ç½®äº¤æ¢æœºç±»å‹ï¼Œé»˜è®¤ topicï¼Œå¯å¡« directã€fanoutã€headers</span>
              <span class="token key atrule">exchange-type</span><span class="token punctuation">:</span> direct
              <span class="token comment"># é˜Ÿåˆ—ç»‘å®šäº¤æ¢æœºçš„è·¯ç”±é”®</span>
              <span class="token key atrule">binding-routing-key</span><span class="token punctuation">:</span> string<span class="token punctuation">-</span>consumer<span class="token punctuation">-</span>key<span class="token punctuation">,</span>string<span class="token punctuation">-</span>consumer<span class="token punctuation">-</span>key<span class="token punctuation">-</span>two
              <span class="token comment"># binding-routing-key æŒ‡å®šäº†å¤šä¸ªè·¯ç”±é”®æ—¶çš„åˆ†éš”ç¬¦ï¼Œé»˜è®¤ null</span>
              <span class="token key atrule">binding-routing-key-delimiter</span><span class="token punctuation">:</span> <span class="token string">&quot;,&quot;</span>
              <span class="token comment"># ç»‘å®šæœªæŒ‡å®š group æ—¶åˆ›å»ºçš„åŒ¿åé˜Ÿåˆ—å‰ç¼€ï¼Œé»˜è®¤ anonymousï¼Œå³ {destination}.anonymous.{base64 of UUID}</span>
              <span class="token key atrule">anonymous-group-prefix</span><span class="token punctuation">:</span> ephemeral
              <span class="token comment"># åªç”¨ group ä½œä¸ºé˜Ÿåˆ—åï¼Œé»˜è®¤ {destination}.{group}</span>
              <span class="token key atrule">queue-name-group-only</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½¿ç”¨ <code>routing-key</code> å±æ€§ï¼Œé‚£ä¹ˆé€šè¿‡ <code>StreamBridge </code> å‘é€æ¶ˆæ¯åä¼šè‡ªåŠ¨æ ¹æ®è·¯ç”±é”®å¯»æ‰¾ç»‘å®šçš„é˜Ÿåˆ—ï¼Œè€Œä½¿ç”¨ <code>routing-key-expression</code> çš„è¯ï¼Œåˆ™è¦é…åˆæŒ‡å®šçš„ SpEL è¡¨è¾¾å¼è¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚ä¸Šæ–¹æŒ‡å®š <code>headers.type</code>ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨æ¶ˆæ¯ Header ä¸­æŒ‡å®š <code>type</code> å±æ€§ä»¥ç¡®å®šè·¯ç”±é”®ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoController</span> <span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">StreamBridge</span> streamBridge<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/send&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Message</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> msg <span class="token operator">=</span> <span class="token class-name">MessageBuilder</span><span class="token punctuation">.</span><span class="token function">withPayload</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;string-consumer-key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        streamBridge<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;demoConsumer-out-0&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token class-name">MimeType</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ¶ˆè´¹è€…å¤šçº¿ç¨‹å¹¶å‘æ¶ˆè´¹" tabindex="-1"><a class="header-anchor" href="#æ¶ˆè´¹è€…å¤šçº¿ç¨‹å¹¶å‘æ¶ˆè´¹" aria-hidden="true">#</a> æ¶ˆè´¹è€…å¤šçº¿ç¨‹å¹¶å‘æ¶ˆè´¹</h3><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># æ¶ˆæ¯æ¶ˆè´¹çš„å¹¶å‘çº¿ç¨‹æ•°ï¼Œé»˜è®¤ 1ï¼Œäº¤æ¢æœºç±»å‹ä¸º direct æ—¶ä¸å¯ç”¨ï¼Œçº¿ç¨‹åç§°ï¼š{group}-{1..count}</span>
<span class="token key attr-name">spring.cloud.stream.bindings.{function-name}.consumer.concurrency</span><span class="token punctuation">:</span> <span class="token value attr-value">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æ‰§è¡Œå‡½æ•°ä¸­å¯ä»¥é€šè¿‡æ‰“å°çº¿ç¨‹åç§°çœ‹åˆ°æ•ˆæœã€‚</p><h2 id="å°ç»“" tabindex="-1"><a class="header-anchor" href="#å°ç»“" aria-hidden="true">#</a> å°ç»“</h2><p>Spring Cloud Stream ç³»åˆ—çš„ç¬¬ä¸€ç¯‡å°±åˆ°æ­¤ç»“æŸï¼Œå…ˆç†è§£ Stream çš„æ¦‚å¿µå’ŒåŸºç¡€ä½¿ç”¨æ–¹å¼ï¼Œåç»­çš„æ–‡ç« å†ç»§ç»­è®²è§£å…³äºæ­»ä¿¡ã€å»¶è¿Ÿã€å¤š Binder ç­‰çš„é…ç½®ä¸ä½¿ç”¨ã€‚</p>`,41);function f(S,x){const a=o("ExternalLinkIcon");return c(),i("div",null,[n("blockquote",null,[n("p",null,[n("strong",null,[n("a",r,[s("Spring Cloud Stream"),e(a)])]),s("ï¼šæ˜¯ç”¨äºæ„å»ºä¸å…±äº«æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿè¿æ¥çš„é«˜åº¦å¯æ‰©å±•çš„äº‹ä»¶é©±åŠ¨å¾®æœåŠ¡ï¼Œå…¶æä¾›ä¸€ä¸ªçµæ´»çš„ç¼–ç¨‹æ¨¡å‹ï¼ŒåŸºäº Spring ä¹ è¯­æ¥å®ç°å¯¹å„ç±»å¸¸è§çš„ MQ ç³»ç»Ÿçš„æ”¯æŒï¼Œå¦‚å®˜æ–¹è‡ªå·±æä¾›çš„ RabbitMQ Binderã€Kafka Binderï¼Œè¿˜æœ‰å…¶å®ƒ MQ å‚å•†è‡ªå·±æä¾›çš„é€‚é…ã€‚å…¶å†…éƒ¨ä½¿ç”¨ Spring Integration æä¾›ä¸ broker çš„è¿æ¥ï¼Œå¹¶èƒ½å¤Ÿåœ¨åŒæ ·çš„é…ç½®ã€ä»£ç ä¸‹å®ç°ä¸åŒ MQ äº§å“çš„æ¶ˆæ¯å‘å¸ƒè®¢é˜…ã€æ¶ˆè´¹è€…ç»„ã€æŒä¹…åŒ–ã€åˆ†åŒºç­‰ç‰¹æ€§ã€‚")])]),k,n("ul",null,[m,n("li",null,[v,s("ï¼šè¡¨ç¤ºæ¶ˆæ¯çš„ç”Ÿäº§ï¼Œåªé’ˆå¯¹æ¶ˆæ¯çš„è¾“å‡ºï¼Œè¯¥ç±»å‹ä½œä¸ºæ•°æ®çš„æºï¼Œå¯¹æ•°æ®åªç”Ÿäº§ä¸æ¶ˆè´¹ï¼Œå®ƒçš„æ‰§è¡Œå¯åˆ†ä¸ºå‘½ä»¤å¼æˆ–è¢«åŠ¨å¼ "),n("ul",null,[n("li",null,[s("å‘½ä»¤å¼ï¼šStream æä¾›äº†è½®è¯¢æœºåˆ¶ï¼Œé»˜è®¤æ¯éš” 1s æ‰§è¡Œå‡½æ•°ï¼Œå³æ¯ä¸€ç§’å‘é€ä¸€æ¡æ¶ˆæ¯åˆ°ç»‘å®šçš„è¾“å‡ºç›®æ ‡ï¼Œé…ç½®å‚æ•°"),n("a",b,[s("åœ¨è¿™"),e(a)])]),n("li",null,[s("å“åº”å¼ï¼šæŸ¥çœ‹"),n("a",g,[s("å®˜æ–‡"),e(a)]),s("ï¼Œå…¶å®å°±æ˜¯åˆ©ç”¨å“åº”å¼ç¼–ç¨‹é£æ ¼ï¼ˆProject Reactorï¼‰æ¥å®ç°æ¶ˆæ¯çš„ç”Ÿæˆï¼Œè€Œä¸ä¾èµ–è½®è¯¢æœºåˆ¶")])])]),y]),h])}const C=p(d,[["render",f],["__file","spring_cloud_stream_one.html.vue"]]);export{C as default};
